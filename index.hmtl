<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Unlock the Link</title>
<style>
  body { font-family: sans-serif; text-align: center; background: #222; color: #eee; }
  h1 { margin-top: 20px; }
  #grid { display: grid; grid-template-columns: repeat(3, 60px); grid-gap: 5px; justify-content: center; margin-top: 30px; }
  .tile { width: 60px; height: 60px; background: #555; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 2em; color: #222; }
  .active { background: #ff0; color: #000; }
  #link { margin-top: 30px; font-size: 1.2em; display: none; }
</style>
</head>
<body>
<h1>Unlock the Link</h1>
<p>Click the tiles to match the correct pattern.</p>
<div id="grid"></div>
<div id="link"><a href="https://account.vintagestory.at/createaccount?gamekeycode=hidden" target="_blank">ðŸŽ‰ Click Here for Your Link ðŸŽ‰</a></div>

<script>
const gridSize = 3;
const solution = [
  [1,0,1],
  [0,1,0],
  [1,0,1]
];

let grid = [
  [0,0,0],
  [0,0,0],
  [0,0,0]
];

const container = document.getElementById("grid");

// Create tiles
for(let r=0; r<gridSize; r++){
  for(let c=0; c<gridSize; c++){
    const tile = document.createElement("div");
    tile.classList.add("tile");
    tile.dataset.row = r;
    tile.dataset.col = c;
    tile.addEventListener("click", () => toggleTile(r,c));
    container.appendChild(tile);
  }
}

function toggleTile(r,c){
  const coords = [[0,0],[0,1],[0,-1],[1,0],[-1,0]]; // self + neighbors
  coords.forEach(([dr,dc]) => {
    let nr = r + dr, nc = c + dc;
    if(nr>=0 && nr<gridSize && nc>=0 && nc<gridSize){
      grid[nr][nc] ^= 1;
      updateTile(nr,nc);
    }
  });
  if(checkSolution()){
    document.getElementById("link").style.display = "block";
  }
}

function updateTile(r,c){
  const tiles = document.querySelectorAll(".tile");
  tiles.forEach(tile => {
    if(parseInt(tile.dataset.row)===r && parseInt(tile.dataset.col)===c){
      tile.classList.toggle("active", grid[r][c]===1);
      tile.textContent = grid[r][c]===1 ? "â˜…" : "";
    }
  });
}

function checkSolution(){
  for(let r=0; r<gridSize; r++){
    for(let c=0; c<gridSize; c++){
      if(grid[r][c] !== solution[r][c]) return false;
    }
  }
  return true;
}
</script>
</body>
</html>
